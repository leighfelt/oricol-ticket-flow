# Docker Compose override for LOCAL development
# Usage: docker compose -f docker-compose.yml -f docker-compose.override.local.yml up -d

services:
  # Change ports and volumes so local copy doesn't clash with server instance
  postgres:
    ports:
      - "5433:5432"  # Local postgres on port 5433 instead of 5432
    volumes:
      - postgres-data-local:/var/lib/postgresql/data
  
  studio:
    ports:
      - "3001:3000"  # Local studio on port 3001 instead of 3000
  
  kong:
    ports:
      - "8001:8000"  # Local API gateway on port 8001 instead of 8000
      - "8444:8443"  # Local HTTPS on port 8444 instead of 8443
  
  mail:
    ports:
      - "2501:2500"  # Local SMTP on port 2501
      - "9001:9000"  # Local mail UI on port 9001

  storage:
    volumes:
      - storage-data-local:/var/lib/storage
  
  imgproxy:
    volumes:
      - storage-data-local:/var/lib/storage

volumes:
  postgres-data-local:
    driver: local
  storage-data-local:
    driver: local
